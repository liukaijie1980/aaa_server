# 使用代理服务器解决CORS问题

当测试客户端遇到CORS跨域错误时，可以使用代理服务器来转发请求，从而避免跨域问题。

## 快速开始

### 方法一：使用Python代理服务器（推荐）

1. **启动代理服务器**
   ```bash
   cd test_client
   python proxy_server.py
   ```
   
   或者指定端口：
   ```bash
   python proxy_server.py 8888
   ```

2. **在测试客户端中配置**
   - 勾选"使用代理服务器（解决CORS问题）"
   - 代理服务器IP: `localhost`
   - 代理服务器端口: `8888`
   - 服务器IP: `10.11.6.92`（实际RADIUS服务器IP）
   - 端口: `8090`
   - 路径: `/services/IServiceUopBossToTvManager`

3. **测试连接**
   - 点击"测试连接"按钮验证配置是否正确

### 方法二：使用Node.js代理服务器

1. **启动代理服务器**
   ```bash
   cd test_client
   node proxy_server.js
   ```
   
   或者指定端口：
   ```bash
   node proxy_server.js 8888
   ```

2. **配置测试客户端**（同方法一）

## 工作原理

代理服务器运行在本地（如 `localhost:8888`），测试客户端向代理服务器发送请求，代理服务器再转发到实际的RADIUS服务器。由于测试客户端和代理服务器在同一域名下，不会触发CORS限制。

```
测试客户端 (浏览器)
    ↓
代理服务器 (localhost:8888)
    ↓
RADIUS服务器 (10.11.6.92:8090)
```

## 配置说明

### 默认目标服务器

代理服务器默认转发到 `http://10.11.6.92:8090/services/IServiceUopBossToTvManager`

可以通过环境变量修改：
```bash
# Python
export RADIUS_SERVER_URL=http://your-server:8090/services/IServiceUopBossToTvManager
python proxy_server.py

# Node.js
RADIUS_SERVER_URL=http://your-server:8090/services/IServiceUopBossToTvManager node proxy_server.js
```

### 自定义目标URL

测试客户端会自动通过查询参数或请求头传递目标URL，无需手动配置代理服务器的目标地址。

## 故障排查

1. **代理服务器无法启动**
   - 检查端口是否被占用
   - 尝试使用其他端口（如8889）

2. **仍然出现CORS错误**
   - 确认已勾选"使用代理服务器"选项
   - 检查代理服务器是否正在运行
   - 查看浏览器控制台的错误信息

3. **连接超时**
   - 检查RADIUS服务器是否可访问
   - 检查网络连接和防火墙设置

## 注意事项

- 代理服务器仅用于测试环境
- 生产环境应配置服务器端CORS支持
- 确保代理服务器和目标服务器之间的网络连接正常
